#!/bin/bash
rti_license_text=$'REAL-TIME INNOVATIONS, INC.\n'
rti_license_text+=$'SOFTWARE LICENSE FOR NON-COMMERCIAL & PRE-COMMERCIAL USE\n'
rti_license_text+=$'\n'
rti_license_text+=$'PLEASE READ THIS AGREEMENT CAREFULLY BEFORE DOWNLOADING, INSTALLING, OR USING THIS PRODUCT. THIS AGREEMENT GRANTS THE ORIGINAL LICENSEE OF THE SOFTWARE (“YOU”) THE RIGHT TO USE THIS PRODUCT FOR SPECIFIED PURPOSES. THIS AGREEMENT STATES THE TERMS AND CONDITIONS UPON WHICH REAL-TIME INNOVATIONS, INC. (“RTI”) OFFERS OR ACCEPTS YOUR OFFER TO LICENSE THE SOFTWARE (AS DEFINED IN 1.a. BELOW) TO YOU.  BY DOWNLOADING, INSTALLING, AND/OR USING THIS PRODUCT, YOU ARE AGREEING TO BE BOUND BY THE TERMS OF THIS AGREEMENT. IF YOU DO NOT AGREE TO THE TERMS OF THIS AGREEMENT, DO NOT DOWNLOAD, INSTALL, OR USE THIS PRODUCT.\n'
rti_license_text+=$'\n'
rti_license_text+=$'The Software is protected by RTI copyright.  You may use or distribute the Software only under these terms.\n'
rti_license_text+=$'\n'
rti_license_text+=$'1. Definitions\n'
rti_license_text+=$'a) The “Software” consists of versions 5.2 and 5.3 of the RTI Connext DDS core libraries, documentation, utilities and runtime services for the following platforms: Windows, Linux on Intel Architecture and ARM, MAC OS X and Android. The Software includes linkable library software binaries, graphical tools, header files, executables, and command line utilities.\n'
rti_license_text+=$'b) A “Target Application” is a user-developed software program that requires physical incorporation of portions of the Software in object form.\n'
rti_license_text+=$'c) A “Project” is a concerted undertaking by an identified development team to design or produce a Target Application or connected set of Target Applications.\n'
rti_license_text+=$'\n'
rti_license_text+=$'2. Thirty Day Evaluation License\n'
rti_license_text+=$'a) Should Your Project not be eligible to use the Non-Commercial & Pre-Commercial Licensing defined in Section 3 then RTI grants You a temporary license to use the Software for the sole purpose of testing the suitability, performance and usefulness of the Software for Your business needs under the following restrictions:\n'
rti_license_text+=$'i)  This license lasts for an period of thirty (30) days from the date of Your first download or installation of the Software;\n'
rti_license_text+=$'ii) You may not use the Software for development beyond prototypes, or to produce revenue or commercial benefit;\n'
rti_license_text+=$'iii) You may not redistribute the Software, or any part of the Software, in any form under this license; and\n'
rti_license_text+=$'iv) You may not use the Software to compete with products sold by RTI.\n'
rti_license_text+=$'\n'
rti_license_text+=$'3. Non-Commercial & Pre-Commercial Licensing\n'
rti_license_text+=$'a) Prohibitions applicable to all licenses granted herein except for the Thirty Day Evaluation License.\n'
rti_license_text+=$'i) You may not use the Software as part of any Project that is intended for commercial distribution or for use internally to produce revenue or benefit (together “Commercial Purpose”). Evidence of a Commercial Purpose includes the existence of a delivery or production schedule, involvement of production management personnel, installation into production systems, and/or development of financial return goals.  You agree to purchase additional licenses and/or platform support if You choose to use the Software for Commercial Purpose.\n'
rti_license_text+=$'ii) You may not use the Software to compete with products sold by RTI.\n'
rti_license_text+=$'iii) You may not combine rights under this License with rights granted by any other license for the Software or other RTI products on the same Project without RTI’s express written permission.\n'
rti_license_text+=$'\n'
rti_license_text+=$'b) Development License\n'
rti_license_text+=$'i) Subject to the restrictions set forth within, RTI grants you a limited, royalty free, non-exclusive, nonassignable, nontransferable right to:\n'
rti_license_text+=$'(1) Develop code that links to and uses the Software, and\n'
rti_license_text+=$'(2) make copies of the library portions of the Software (in subdirectory “/lib”) in object-code form and physically incorporate the copies into a Target Application.\n'
rti_license_text+=$'ii) Nothing in this License limits Your right to release software that You develop under license terms of Your choosing provided that such code does not contain the any component of the Software other than a) the header files that define the Software’s programming interface, and/or b) code created by the rtiddsgen code generator.\n'
rti_license_text+=$'\n'
rti_license_text+=$'c) Restriction on Redistribution of Development Environment\n'
rti_license_text+=$'i) You may distribute the Software provided that such redistribution (i) remains subject to the terms of this License, (ii) includes this license or a link to this license in any documentation, and (iii) does not include infrastructure services (including, but not limited to, routing services, recording services or persistence services) or graphical tools (“Authorized Redistribution”). You must also include this license as “RTI_LICENSE.TXT” in the top-level directory of any Authorized Distribution of the Software or its components.\n'
rti_license_text+=$'ii) You may not claim copyright on the Software or modified Software, nor remove RTI’s copyright. You must associate RTI’s trademarks and no others with the original or modified works.\n'
rti_license_text+=$'iii) If You have received an Authorized Redistribution and desire to gain access to RTI’s suite of graphical tools and infrastructure services, please visit https://www.rti.com/ncl\n'
rti_license_text+=$'\n'
rti_license_text+=$'d) Distribution of Target Applications\n'
rti_license_text+=$'i) Only Target Applications that contain neither software development capability nor graphical components of the Software are eligible for distribution under this Clause d.\n'
rti_license_text+=$'ii) You may distribute Target Applications to third-party end users provided that end users are prohibited from using the Target Applications for a Commercial Purpose, and that neither You nor the end users receives any commercial benefit for distributing or using the Target Applications.\n'
rti_license_text+=$'iii) Any such distributions must remain subject to the terms of this License and prominently include this license or a link to this license in any documentation. You may not claim copyright on the Software or modified Software, nor remove RTI’s copyright. You must associate RTI’s trademarks and no others with the original works.\n'
rti_license_text+=$'\n'
rti_license_text+=$'4. Rights\n'
rti_license_text+=$'a) The Software is “Commercial Computer Software” as defined by the Federal Acquisition Regulation, and is provided to the Government with “Restricted Rights”, subject to the terms of this License.\n'
rti_license_text+=$'b) This License does not grant You any rights in or license to trademarks, patents, service marks, or logos of RTI or other entities.\n'
rti_license_text+=$'\n'
rti_license_text+=$'5. No Support\n'
rti_license_text+=$'a) Except as may be provided for in a separate written agreement between You and RTI, if any, RTI is under no obligation to support, maintain, or update the Software.\n'
rti_license_text+=$'b) You are solely responsible for the support and maintenance of all portions of any Target Applications.\n'
rti_license_text+=$'\n'
rti_license_text+=$'6. No Warranty and Limited Liability\n'
rti_license_text+=$'a) THE SOFTWARE IS PROVIDED AND USED BY YOU OR IN TARGET APPLICATIONS “AS IS”.  RTI DISCLAIMS ALL WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF THIRD PARTY RIGHTS.  NO ORAL OR WRITTEN INFORMATION OR ADVICE GIVEN BY RTI, ITS DEALERS, DISTRIBUTORS, AGENTS OR EMPLOYEES SHALL CREATE A WARRANTY.\n'
rti_license_text+=$'b) You are solely responsible for all liability arising out of or in connection with the copying, marketing, performance or other distribution of Your modifications to the Software, or Your Target Applications.\n'
rti_license_text+=$'c) RTI SHALL NOT BE LIABLE FOR ANY DIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES (INCLUDING DAMAGES FOR LOSS OF BUSINESS, PROFITS OR THE LIKE) ARISING OUT OF THE USE OR INABILITY TO USE THE SOFTWARE.\n'
rti_license_text+=$'d)  To the fullest extent permitted by law, RTI shall not be liable to You for any liability arising out of related to this Agreement, whether arising out of or related to breach of contract, tort (including negligence), or otherwise.\n'
rti_license_text+=$'\n'
rti_license_text+=$'7. General\n'
rti_license_text+=$'a) Downloading, installing, or using the Software, or selecting the online "Accept License Agreement" button is a confirmation of Your agreement that You comply, now and during any use term, with the United States Export Administration and Regulations, and with all local domestic and international export laws and regulations.  These laws include restrictions on destinations, end users and end use.\n'
rti_license_text+=$'b) If You are an agency of the United States Government, then this License will be governed by the United States federal common law.  Otherwise, this License will be governed by the laws of the State of California except with regard to its choice of law rules.\n'
rti_license_text+=$'c) No changes to this License will be valid unless made in writing and signed by a corporate officer of RTI.\n'
rti_license_text+=$'\n'
rti_license_text+=$'\n'
rti_license_text+=$'232 E. Java Drive, Sunnyvale, CA 94089\n'
rti_license_text+=$'Tel: +1 (408) 990-7400   Fax: +1 (408) 990-7402\n'
rti_license_text+=$'rti.com\n'
rti_license_text+=$'Software License for Non-Commercial Use #4042(Rev.01-18))\n'
rti_license_text+=$'\nA copy of this license agreement will be written to /opt/rti.com/rti_connext_dds-5.3.1/RTI_LICENSE.txt during installation\n'

case "${RTI_NC_LICENSE_ACCEPTED}" in
    [Yy][Ee][Ss] )
        echo "$rti_license_text"
        echo -e "\033[0;32mInstalling RTI Connext DDS"
        exit 0;;
    * )
        echo "$rti_license_text" | more
        while true; do
            read -p $'\e[33mDo you accept the terms of this license agreement?\e[0m: ' yn
            case $yn in
                [Yy][Ee][Ss] ) echo -e "\033[0;32mInstalling RTI Connext DDS"; break;;
                [Nn]* ) echo -e "\033[0;31mInstallation Cancelled"; exit 1;;
                * ) echo "Please answer yes or no.";;
            esac
        done;;
esac
exit 0

